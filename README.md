# API для личного кабинета

### Описание
Проект позволяет создать личный кабинет пользователя. В нем реализованы методы регистрации, авторизации, изменения 
личных данных пользователя, выход из аккаунта, а также получение пользователем истории своих входов в аккаунт.
Проект работает на JWT-токенах. Предусмотрено управление доступами к сторонним ресурсам. Пользователю назначаются 
роли суперпользователем, которые в свою очередь имеют права на какие-либо действия.

После запуска кода документацию по API можно посмотреть по ссылке: http://localhost:5000/apidocs/

### Технологии
- Python 3.9 
- Flask 2.1.1
- Flask-RESTful 0.3.9
- Marshmallow 3.15
- PostgreSQL 13
- Redis 4.2.2

### Запуск проекта
- Заполните файл .env в соответствии с .env.example
- Чтобы запустить проект локальной разработкиск с перезагрузкой, введите команду:
```
make local_up
```
- Чтобы запустить проект с помощью WSGI, используйте:
```
make up
```

### Создание супер пользователя
- в зависимости от варианта запуска :
```
 make local_create_superuser login=<LOGIN> password=<PASSWORD> email=<EMAIL>
 make create_superuser login=<LOGIN> password=<PASSWORD> email=<EMAIL>
```

### Создание миграции db
- в зависимости от варианта запуска :
```
  make local_db_migrate m=<название миграции>
  make db_migrate m=<название миграции>
```

### Обновление таблиц после миграции db

применится автоматически при старте приложения или в ручном режиме
- в зависимости от варианта запуска :
```
  make local_db_upgrade
  make db_upgrade
```

### Запуск тестов в контейнере
```
  make test
```

### Пояснения

Основной сущностью проекта сейчас является Profile

схема взаимодействия таблиц выглядит так:

![Image alt](https://github.com/evdrug/server_auth/raw/main/static/table_schema.png)


### Остальные сервисы

прежде чем запустить остальные сервисы, необходимо создать общую сеть в docker

```
docker network create yandex_network
```

```async_api``` - https://github.com/evdrug/service_async_api

```admin_panel``` - https://github.com/evdrug/new_admin_panel_sprint_3
### Авторы
Евгений Д., Анастасия Еременко
